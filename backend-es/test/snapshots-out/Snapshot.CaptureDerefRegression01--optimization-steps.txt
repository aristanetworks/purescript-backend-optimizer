Snapshot.CaptureDerefRegression01.Box (Step 0; Original)
  let Box =
    (\ value0 ->
      { tag =
          "Box"
      , value0 =
          value0
      }
    );
---------------
Snapshot.CaptureDerefRegression01.Box (Step 1; Final)
  let Box =
    (\ value0 ->
      { tag =
          "Box"
      , value0 =
          value0
      }
    );

===============

Snapshot.CaptureDerefRegression01.add (Step 0; Original)
  (Data.Semiring.add Data.Semiring.semiringInt)
---------------
Snapshot.CaptureDerefRegression01.add (Step 1; Final)
  Data.Semiring.intAdd

===============

Snapshot.CaptureDerefRegression01.test1 (Step 0; Original)
  (\v@v0 -> \b@v1 -> 
    {#- Rewrite - Inline -#}
    let v2 =
      v@v0;
    {#- Rewrite - Inline -#}
    let v3 =
      b@v1;
    {#- Rewrite - Inline -#}
    let v4 =
      (\a@v4 b1@v5 ->
        ((Snapshot.CaptureDerefRegression01.add a@v4) b1@v5)
      );
    {#- Rewrite - Inline -#}
    let v5 =
      (
        v2
      )#value0;
    {#- Rewrite - Inline -#}
    let v6 =
      (
        v2
      )#value1;
    (v4 a@v5 b1@v3)
  )
---------------
Snapshot.CaptureDerefRegression01.test1 (Step 1)
  (\v@v0 -> \b@v1 -> 
    {#- Rewrite - Inline -#}
    let v2 =
      (
        v@v0
      )#value0;
    (add v2 b@v1)
  )
---------------
Snapshot.CaptureDerefRegression01.test1 (Step 2; Final)
  (\v@v0 -> \b@v1 -> 
    (add (
      v@v0
    )#value0 b@v1)
  )

===============

Snapshot.CaptureDerefRegression01.test2 (Step 0; Original)
  (\v@v0 -> 
    {#- Rewrite - Inline -#}
    let v1 =
      v@v0;
    {#- Rewrite - Inline -#}
    let v2 =
      (\a@v2 ->
        (\b@v3 -> 
          ((Snapshot.CaptureDerefRegression01.add a@v2) b@v3)
        )
      );
    {#- Rewrite - Inline -#}
    let v3 =
      (
        v1
      )#value0;
    {#- Rewrite - Inline -#}
    let v4 =
      (
        v1
      )#value1;
    (v2 a@v3)
  )
---------------
Snapshot.CaptureDerefRegression01.test2 (Step 1; Final)
  (\v@v0 -> 
    let v1 =
      (
        v@v0
      )#value0;
    (\b@v2 -> 
      (add v1 b@v2)
    )
  )

===============

Snapshot.CaptureDerefRegression01.test3 (Step 0; Original)
  (\v@v0 -> 
    {#- Rewrite - Inline -#}
    let v1 =
      v@v0;
    {#- Rewrite - Inline -#}
    let v2 =
      (\a@v2 ->
        (Snapshot.CaptureDerefRegression01.Box (\b@v3 -> 
          ((Snapshot.CaptureDerefRegression01.add a@v2) b@v3)
        ))
      );
    {#- Rewrite - Inline -#}
    let v3 =
      (
        v1
      )#value0;
    {#- Rewrite - Inline -#}
    let v4 =
      (
        v1
      )#value1;
    (v2 a@v3)
  )
---------------
Snapshot.CaptureDerefRegression01.test3 (Step 1; Final)
  (\v@v0 -> 
    let v1 =
      (
        v@v0
      )#value0;
    (Snapshot.CaptureDerefRegression01.Box.Box (\b@v2 -> 
      (add v1 b@v2)
    ))
  )